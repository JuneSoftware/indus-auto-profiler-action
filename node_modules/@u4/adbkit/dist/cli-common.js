"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getClientDevice = void 0;
const adb_1 = require("./adb");
async function getClientDevice(serials) {
    const adb = (0, adb_1.createClient)();
    if (!serials || !serials.length) {
        const devices = await adb.listDevices();
        if (devices.length == 0) {
            console.error('no Android devices found');
            process.exit(1);
            return [];
        }
        if (devices.length == 1) {
            return [devices[0].getClient()];
        }
        console.error('Multiple devices avaliable provide a serial number to choose one');
        console.error(devices.map(d => `- ${d.id}`).join('\n'));
        process.exit(1);
    }
    if (serials.length === 1 && (serials[0] === 'all' || serials[0] === '*')) {
        serials = (await adb.listDevices()).map((d) => d.id);
    }
    return serials.map(serial => adb.getDevice(serial));
}
exports.getClientDevice = getClientDevice;
//# sourceMappingURL=cli-common.js.map